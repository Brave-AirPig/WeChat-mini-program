# ã€Šèƒ¶å›Šæ˜Ÿçƒã€‹å¾®ä¿¡å°ç¨‹åºé¡¹ç›®å¼€å‘æ–‡æ¡£ ğŸ“‘

## é¡¹ç›®èƒŒæ™¯

ä¸€ä¸ªä¹äºåˆ†äº«è¡Œä¸šçŸ¥è¯†çš„å¹³å°ï¼Œå¦‚æœè§‰å¾—ä¸é”™çš„è¯ï¼Œå¯ä»¥ç‚¹ä¸€ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼Œä¹‹åä¼šä¸æ–­è¿›è¡Œå®Œå–„æ¨å‡ºæ›´å¤šçš„äº§å“é¡¹ç›®

å…³äºå¾®ä¿¡å°ç¨‹åºçš„å­¦ä¹ å¯ä»¥å‚è€ƒæˆ‘çš„[ ä¸ªäººåšå®¢( CSDN ) ](https://blog.csdn.net/weixin_63836026/article/details/127456823)ä»¥åŠå®˜æ–¹æ–‡æ¡£

## é¡¹ç›®ä¾èµ–

- node
- npm
- Weui ç»„ä»¶åº“ï¼ˆ[æ€æ ·å®‰è£… Weui](https://wechat-miniprogram.github.io/weui/docs/quickstart.html#%E4%BD%BF%E7%94%A8%E4%B9%8B%E5%89%8D)ï¼‰

## å¼€å‘ç¯å¢ƒ

- å¾®ä¿¡å°ç¨‹åº 2.19.4 ç‰ˆæœ¬

## æŠ€æœ¯ç®€ä»‹

1. å¾®ä¿¡å°ç¨‹åº

- è‡ªå®šä¹‰ç»„ä»¶ã€è‡ªå®šä¹‰ TabBarã€è‡ªå®šä¹‰ NavBar...ã€‘
- å…¨å±€çŠ¶æ€çš„æ³¨å†Œä¸æŒ‚è½½
- è¡¨å•çš„åŸºæœ¬ä½¿ç”¨
- å°ç¨‹åºå¼€å‘å¸¸ç”¨ API
- è·¯ç”±è·³è½¬
- æ–¹æ³•å°è£…
- æ•°æ®è¯·æ±‚
- æ¡ä»¶åˆ¤æ–­æ¡ä»¶å¾ªç¯-è§†å›¾å±‚ä¸é€»è¾‘å±‚çš„äº¤äº’

1. æœ¬åœ°æ•°æ®æŒä¹…åŒ–
2. å‰ç«¯åˆ†é¡µæ–¹æ¡ˆ
3. ä»£ç ã€æ€§èƒ½ä¼˜åŒ–
4. Weui åº“
5. å‰ç«¯å·¥ç¨‹åŒ–æ¨¡å—åŒ–å°è£…ç†å¿µ
6. é¡¹ç›®æ•´ä½“é‡‡ç”¨ Grid + æµå¼å¸ƒå±€å®ç°å¤šç§æ’ç‰ˆæ•ˆæœï¼ˆç€‘å¸ƒæµã€ç½‘æ ¼å¸ƒå±€...ï¼‰

## é¡¹ç›®é¸£è°¢

- åç«¯æ•°æ®æ¨¡æ‹Ÿé¸£è°¢ï¼š[Easy Mock](https://mock.mengxuegu.com/)
- icon å›¾æ ‡ï¼š[iconfont](https://www.iconfont.cn/)
- éƒ¨åˆ†å›¾ç‰‡æ¥æºé¸£è°¢ï¼š [unsplash](https://unsplash.dogedoge.com/)ã€[wallhaven](https://wallhaven.cc/)
- UI çµæ„Ÿæ¥æºï¼šIQQO å°ç¨‹åºã€å³æ—¶è®¾è®¡ã€Dribbble... åœ¨æ­¤é¸£è°¢

---

# é¡¹ç›®æ¶æ„ä»¥åŠä¾èµ–æ­å»º

### å•å…ƒæè¿°

é¡¹ç›®é¡µé¢ä»¥åŠä¾èµ–æ­å»ºï¼Œè¯¥é¡¹ç›®åŒ…å« 10 ä¸ªé¡µé¢ï¼ˆå››ä¸ª TabBar é¡µé¢ï¼‰ï¼Œ3 ä¸ªè‡ªå®šä¹‰ç»„ä»¶

### å•å…ƒå®æ–½

- åœ¨ `page` æ–‡ä»¶å¤¹ä¹‹ä¸‹åˆ›å»ºå››ä¸ª TabBar é¡µé¢ï¼šindex(ä¸»é¡µ)ã€my(æˆ‘çš„)ã€shop(èƒŒåŒ…)ã€plate(æ¿å—)

- å¼•å…¥ Weui ç»„ä»¶åº“

```shell
npm i weui-miniprogram
```

æ„å»ºå®Œæˆ npm ä¹‹ååœ¨éœ€è¦ä½¿ç”¨ç»„ä»¶çš„é¡µé¢å¼•å…¥ `wxss` å³å¯ä½¿ç”¨å…¶ç»„ä»¶

```shell
@import 'weui-miniprogram/weui-wxss/dist/style/weui.wxss';
```

---

# è‡ªå®šä¹‰ TabBar

<img src="./images/index1.png" style="width:200px"></img>
<img src="./images/index2.png" style="width:200px"></img>

### å•å…ƒæè¿°

è‡ªå®šä¹‰ TabBarï¼Œç®€å•æ¡ä»¶åˆ¤æ–­å®ç°è§†å›¾å±‚ä¸é€»è¾‘å±‚çš„äº¤äº’

### å•å…ƒå®æ–½

`app.json`ä¸­çš„ TabBar é…ç½®ä¸éœ€è¦åˆ é™¤, å¦åˆ™ä¼šæŠ¥é”™, å…¨å±€é…ç½® `"custom": true` è‡ªå®šä¹‰é…ç½® TabBar

```json
{
	"pages": [
		"pages/index/index",
		"pages/my/my",
		"pages/plate/plate",
		"pages/shop/shop"
	],
	"window": {
		"backgroundTextStyle": "light",
		"navigationStyle": "custom"
	},
	"entryPagePath": "pages/index/index",
	"style": "v2",
	"sitemapLocation": "sitemap.json",
	"tabBar": {
		"custom": true,
		"list": [
			{
				"pagePath": "pages/index/index",
				"iconPath": "/images/home_no.png",
				"selectedIconPath": "/images/home.png",
				"text": "ä¸»é¡µ"
			},
			{
				"pagePath": "pages/plate/plate",
				"iconPath": "/images/plate_no.png",
				"selectedIconPath": "/images/plate.png",
				"text": "æ¿å—"
			},
			{
				"pagePath": "pages/shop/shop",
				"iconPath": "/images/shop_no.png",
				"selectedIconPath": "/images/shop.png",
				"text": "æ˜ŸçƒèƒŒåŒ…"
			},
			{
				"pagePath": "pages/my/my",
				"iconPath": "/images/my_no.png",
				"selectedIconPath": "/images/my.png",
				"text": "æˆ‘çš„"
			}
		]
	}
}
```

åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º `custom-tab-bar` æ–‡ä»¶å¤¹å­˜æ”¾è‡ªå®šä¹‰å¯¼èˆªç»„ä»¶ï¼Œåœ¨ `index.js`ä¸­è¿›è¡Œé…ç½®

```javascript
Component({
	data: {
		btn_show: false,
		selected: 0,
		color: "#7A7E83",
		selectedColor: "#f4af0c",
		list: [
			{
				pagePath: "/pages/index/index",
				iconPath: "/images/home_no.png",
				selectedIconPath: "/images/home.png",
				text: "ä¸»é¡µ",
			},
			{
				pagePath: "/pages/plate/plate",
				iconPath: "/images/plate_no.png",
				selectedIconPath: "/images/plate.png",
				text: "æ¿å—",
			},
			{
				pagePath: "/pages/shop/shop",
				iconPath: "/images/shop_no.png",
				selectedIconPath: "/images/shop.png",
				text: "æ˜ŸçƒèƒŒåŒ…",
			},
			{
				pagePath: "/pages/my/my",
				iconPath: "/images/my_no.png",
				selectedIconPath: "/images/my.png",
				text: "æˆ‘çš„",
			},
		],
	},
	attached() {},
	methods: {
		switchTab(e) {
			const data = e.currentTarget.dataset
			const url = data.path
			wx.switchTab({ url })
		},
		btnSwitch() {
			this.setData({
				btn_show: !this.data.btn_show,
			})
		},
	},
})
```

`index.json`é…ç½®å¼€å¯ç»„ä»¶

```json
{
	"component": true
}
```

`index.wxml` é…ç½®

å¾®ä¿¡å°ç¨‹åºç»™æˆ‘ä»¬æä¾›äº†è‡ªå®šä¹‰ TabBar çš„æ¡ˆä¾‹ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨æä¾›å¥½çš„é…ç½®æ˜¯å› ä¸ºç”¨ä¸æƒ¯ `cover` ç›¸å…³ç»„ä»¶ï¼Œè¿™äº› `cover` ç»„ä»¶å¤§å¹…åº¦é™ä½äº†æ ·å¼çš„å¯ç”¨æ€§ï¼Œæœ€é«˜å±‚å æ€§æœ‰æ—¶ä¹Ÿæ˜¯ä¸€ä¸ªä¸æ€ä¹ˆå¥½çš„é€‰æ‹©

**æ•´ä¸ª TabBar å°†å›´ç»•ç€ btn_show çŠ¶æ€è¿›è¡ŒåŠŸèƒ½å®æ–½**

- btn_show å°†æ§åˆ¶ä¸­é—´æŒ‰é’®çš„æ ·å¼åˆ‡æ¢
- btn_show å°†æ§åˆ¶å¤šåŠŸèƒ½çš„ show ä»¥åŠ hide
- btn_show å°†æ§åˆ¶ä¸‰è§’å½¢çš„é¢œè‰²ï¼ˆå› ä¸ºå¼¹å‡ºåŠŸèƒ½ä¼šæœ‰è¿‡æ¸¡é˜´å½±æ ·å¼ï¼Œå¢åŠ é¢œè‰²å˜æ¢åŠŸèƒ½å°†ä½¿é¡¹ç›®æ›´åŠ çœŸå®ï¼‰

```html
<!-- ä¸­é—´å¤šé€‰é¡¹æŒ‰é’® -->
<cover-view class="btn_img_box">
	<cover-image
		class="btn_img"
		src="{{ btn_show ? '../images/KMD_no.png' : '../images/KMD.png' }}"
	></cover-image>
</cover-view>

<view class="tab-bar">
	<!-- å¾ªç¯TabBaråˆ—è¡¨é¡¹ -->
	<view
		wx:for="{{list}}"
		wx:key="index"
		class="tab-bar-item"
		data-path="{{item.pagePath}}"
		data-index="{{index}}"
		bindtap="switchTab"
	>
		<image
			src="{{selected === index ? item.selectedIconPath : item.iconPath}}"
			mode="heightFix"
		></image>
		<view style="color: {{selected === index ? selectedColor : color}}"
			>{{item.text}}</view
		>
	</view>

	<!-- ä¸‰è§’è®¾è®¡ -->
	<view
		class="'tab-bar-border_left' + {{  btn_show ? 'tab-bar-border_left_show' : ''  }}"
	></view>
	<view
		class="'tab-bar-border_right' + {{  btn_show ? 'tab-bar-border_right_show' : ''  }}"
	></view>
</view>

<!-- è·³å‡ºåŠŸèƒ½é€‰é¡¹ -->
<view class="show_state" wx:if="{{ btn_show }}">
	<view class="left_state">
		<image src="../images/text.png" mode="heightFix"></image>
		<text>å¸–å­</text>
	</view>

	<view class="right_state">
		<image src="../images/feedback.png" mode="heightFix"></image>
		<text>é—®é¢˜/éœ€æ±‚åé¦ˆ</text>
	</view>
</view>
```

`index.wxss` ç¼–å†™

å¯¹äºä¸­é—´ç©ºä½çš„ä½ç½®ä½¿ç”¨ä¸€ä¸ªè¾¹è·æ¥é¡¶å ä½ï¼Œä¸­é—´æŒ‰é’®ä½¿ç”¨ `cover` ç»„ä»¶åœ¨è¿™é‡Œæ˜¯æ¯”è¾ƒåˆé€‚çš„

å†è€…å°±æ˜¯åŠ¨æ€ç±»ä¸é€»è¾‘å±‚è¿›è¡Œä¸€ä¸ªç®€å•äº¤äº’

```css
/* ä¸­é—´æŒ‰é’® */
.btn_img_box {
	position: fixed;
	bottom: 27.5px;
	left: 50%;
	transform: translate(-50%, 0);
	height: 55px;
	width: 55px;
}

/* tabbar */
.tab-bar {
	width: 100vw;
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	height: 55px;
	background: #000;
	display: flex;
	padding-bottom: env(safe-area-inset-bottom);
}

.tab-bar-item {
	flex: 1;
	text-align: center;
	display: flex;
	justify-content: center;
	align-items: center;
	flex-direction: column;
}

.tab-bar :nth-of-type(3) {
	margin-left: 150rpx;
}

.tab-bar-item image {
	height: 100%;
	margin: 10rpx 0;
}

.tab-bar-item view {
	font-size: 10px;
	margin-bottom: 10rpx;
}

.tab-bar-border_left,
.tab-bar-border_right {
	position: absolute;
	top: 0;
	height: 0;
	width: 0;
	border-top: 8px solid transparent;
	border-left: 8px solid transparent;
	border-bottom: 8px solid #fff;
	border-right: 8px solid #fff;
}

.tab-bar-border_left {
	left: 0;
	transform: rotate(180deg);
}

.tab-bar-border_right {
	right: 0;
	transform: rotate(270deg);
}

/* åŠ¨æ€ç±» */

.tab-bar-border_left_show,
.tab-bar-border_right_show {
	border-bottom: 8px solid #999;
	border-right: 8px solid #999;
}

.btn_img_box .btn_img {
	height: 100%;
	width: 100%;
}

/* å¤šåŠŸèƒ½ */
.show_state {
	color: #fff;
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	position: fixed;
	bottom: 54px;
	left: 0;
	height: 180px;
	width: 100vw;
	text-align: center;
	z-index: -99;
	background-image: linear-gradient(to top, #999, transparent);
}

.show_state view {
	display: grid;
	grid-template-rows: repeat(2, 1fr);
	justify-items: center;
	align-items: center;
	background-color: transparent;
	font-size: 24rpx;
	color: #f4af0c;
	margin-top: 54px;
}

.show_state view text {
	align-self: flex-start;
}

.show_state image {
	width: 45%;
	height: 45%;
	background-color: rgba(244, 174, 11, 0.6);
	padding: 12rpx;
	border-radius: 12rpx;
}
```

æœ€åæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸€ä¸ª TabBar é¡µé¢éƒ½è¿›è¡Œä¸€ä¸ªåŒ¹é… ï¼ˆåªé…ç½®ä¸€ä¸ªä½œä¸ºç¤ºä¾‹ï¼‰

```javascript
  onShow() {
    // å¦‚æœæœ‰è¿™ä¸ªæ–¹æ³•å¹¶ä¸”è°ƒç”¨ getTabbar è¿™ä¸ªå®ä¾‹
    if(typeof this.getTabBar == 'function' && this.getTabBar()) {
       this.getTabBar().setData({
       // ç¬¬ä¸€é¡µ,åé¢é¡µé¢IDä¾æ¬¡é€’å¢
        selected: 0
       })
     }
   },
 onHide() {
  // ç¦»å¼€é¡µé¢æˆ‘ä»¬æ¸…é™¤ä¸€ä¸‹åº•éƒ¨å¼¹å‡ºçš„å¤šåŠŸèƒ½é€‰é¡¹
  if(typeof this.getTabBar == 'function' && this.getTabBar()) {
    this.getTabBar().setData({
        btn_show: false
    })
  }
 }
```

---

# è‡ªå®šä¹‰ NavBar / Search ç»„ä»¶

<img src="./images/index1.png" style="width:200px"></img>

### å•å…ƒæè¿°

è‡ªå®šä¹‰é¡¶éƒ¨ NavBarï¼Œå…¨å±€æŒ‚è½½çŠ¶æ€

### å•å…ƒå®æ–½

é…ç½®å…¶ä»–è‡ªå®šä¹‰ç»„ä»¶ä¸éœ€è¦åœ¨æ ¹ç›®å½•é…ç½®ï¼Œè‡³äºè‡ªå®šä¹‰ TabBar ä¸ºä»€ä¹ˆåœ¨æ ¹ç›®å½•é…ç½®...å¥½åƒè¿™å·²ç»æ˜¯ä¸€ç§çº¦å®šä¿—æˆçš„è§„çŸ©ï¼Œæˆ‘ä»¬æ–°åˆ›å»ºä¸€ä¸ª components æ–‡ä»¶å¤¹ï¼Œä¹‹åå¯å¤ç”¨ç»„ä»¶å°±éƒ½æ”¾åœ¨ component æ–‡ä»¶å¤¹ä¹‹ä¸‹å°±å¥½äº†

`navbar.wxml` ç¼–å†™

æˆ‘æ‰“ç®—åœ¨ä¹‹åå•ç‹¬å†™ä¸€ä¸ªæœç´¢é¡µé¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ª input æ˜¯ä¸€ä¸ªè·¯ç”±è·³è½¬ï¼Œæœ‰æ²¡æœ‰å¿…è¦å†™è¿™ä¸ª input æ— æ‰€è°“äº†

```html
<!-- è‡ªå®šä¹‰é¡¶éƒ¨æ  -->
<view class="nav-bar" style="height:{{ navBarHeight }}px;">
    <input class="navColor search" placeholder="æ¢ç´¢æ˜Ÿçƒ" style="height:{{ menuHeight }}px; min-height:{{ menuHeight }}px;line-height:{{ menuHeight }}px; left:{{ menuRight }}px; top:{{ menuTop }}px;"></input>
</view>

<!-- å ä½ï¼Œé«˜åº¦ä¸é¡¶éƒ¨æ ä¸€æ · -->
<view style="height:{{ navBarHeight }}px;"></view>

```

å°†è¡Œå†…æ ·å¼éƒ½å†™æˆçŠ¶æ€æ•°æ®æ˜¯ä¸ºäº†é€‚é…ä¸æ–­å˜åŒ–çš„å¾®ä¿¡å°ç¨‹åºå³ä¸Šè§’çš„èƒ¶å›ŠæŒ‰é’®ï¼Œè¿˜å¥½æˆ‘ä»¬å¯ä»¥é€šè¿‡ API æ¥è·å–ï¼Œè¿™ä¸ªåº”è¯¥ä¼šå¤šæ¬¡ä½¿ç”¨åœ¨ä¸åŒé¡µé¢ä¸­ï¼Œæ‰€ä»¥è¿˜æ˜¯å†™åˆ°å…¨å±€ä¸­æ¯”è¾ƒå¥½

`app.js` ç¼–å†™

```javascript
App({
	onLaunch(options) {
		// è·å–ç³»ç»Ÿä¿¡æ¯
		const systemInfo = wx.getSystemInfoSync()
		// èƒ¶å›ŠæŒ‰é’®ä½ç½®ä¿¡æ¯
		const menuButtonInfo = wx.getMenuButtonBoundingClientRect()
		// å¯¼èˆªæ é«˜åº¦ = çŠ¶æ€æ é«˜åº¦ + 44
		this.globalData.navBarHeight = systemInfo.statusBarHeight + 44
		this.globalData.menuRight = systemInfo.screenWidth - menuButtonInfo.right
		this.globalData.menuTop = menuButtonInfo.top
		this.globalData.menuHeight = menuButtonInfo.height
	},
	// æ•°æ®éƒ½æ˜¯æ ¹æ®å½“å‰æœºå‹è¿›è¡Œè®¡ç®—ï¼Œè¿™æ ·çš„æ–¹å¼å…¼å®¹å¤§éƒ¨åˆ†æœºå™¨
	globalData: {
		navBarHeight: 0, // å¯¼èˆªæ é«˜åº¦
		menuRight: 0, // èƒ¶å›Šè·å³æ–¹é—´è·ï¼ˆæ–¹ä¿æŒå·¦ã€å³é—´è·ä¸€è‡´ï¼‰
		menuTop: 0, // èƒ¶å›Šè·åº•éƒ¨é—´è·ï¼ˆä¿æŒåº•éƒ¨é—´è·ä¸€è‡´ï¼‰
		menuHeight: 0, // èƒ¶å›Šé«˜åº¦ï¼ˆè‡ªå®šä¹‰å†…å®¹å¯ä¸èƒ¶å›Šé«˜åº¦ä¿è¯ä¸€è‡´ï¼‰
	},
})
```

`navbar.js` ç¼–å†™

```javascript
const app = getApp()
Component({
	data: {
		navBarHeight: app.globalData.navBarHeight,
		menuRight: app.globalData.menuRight,
		menuTop: app.globalData.menuTop,
		menuHeight: app.globalData.menuHeight,
	},
})
```

`navbar.wxss` ç¼–å†™

è¿™é‡Œæˆ‘ä»¬ç»™èƒŒæ™¯ä¸€ä¸ªé«˜æ–¯æ¨¡ç³Šï¼Œçªå‡ºè§†è§‰ä½“éªŒ

```css
.nav-bar {
	position: fixed;
	width: 100%;
	top: 0;
	color: #fff;
	background-color: rgb(255, 255, 255, 0.5);
	backdrop-filter: blur(15px);
	z-index: 99;
}

.navColor {
	background-color: #fff;
}

.nav-bar .search {
	width: 60%;
	color: #333;
	font-size: 14px;
	background: #fff;
	position: absolute;
	border-radius: 24px;
	background: #efefef;
	padding-left: 24px;
}
```

---

# ç¨‹åºä¸»é¡µå¼€å‘

<img src="./images/index3.png" style="width:200px"></img>

### å•å…ƒæè¿°

ä¸»é¡µå¼€å‘ï¼ˆè½®æ’­å›¾ã€åŠŸèƒ½é€‰é¡¹ã€çƒ­é—¨è¯é¢˜ï¼‰

ç§»åŠ¨ç«¯æ ·å¼ï¼Œåç«¯æ•°æ®æ¨¡æ‹Ÿï¼Œä½¿ç”¨ wx çš„ requst API è¿›è¡Œæ•°æ®ç½‘ç»œè¯·æ±‚

### å•å…ƒå®æ–½

åŸºç¡€é¡¹ç›®å¼€å‘ï¼Œæ²¡æœ‰åƒä¹‹å‰æˆ‘ä»¬è‡ªå®šä¹‰ç»„ä»¶é‚£æ ·æœ‰è¶£ï¼Œä¸è¿‡æˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šå¾®ä¿¡å°ç¨‹åºæˆ–è€…è¯´æ•´ä½“ç§»åŠ¨ç«¯å¼€å‘çš„æ ·å¼éƒ½æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ï¼ˆegï¼šå¦‚æœç»™åˆ°ä¸€ä¸ªå…ƒç´ å®½åº¦ï¼Œmargin æˆ–è€… padding å°±ä¼šå‘ç”Ÿåç§»ï¼‰ï¼Œå†è€…å°±æ˜¯ä¸€ä¸ªæ•°æ®çš„è¯·æ±‚ä¸è§£æä¹Ÿæ˜¯æœ‰äº›è¶£å‘³çš„

`index.wxml` ç¼–å†™

è½®æ’­å›¾çš„é«˜æ–¯æ¨¡ç³Šå›¾ç‰‡æˆ‘ä½¿äº†ä¸€ä¸ªå°èªæ˜ï¼Œè½®æ’­å›¾çš„åå­—æ˜¯ä»¥æ•°å­—ç»“å°¾çš„ï¼Œé€šè¿‡è½®æ’­å›¾ API ç›‘å¬åˆ°å›¾ç‰‡ ID æ­£å¥½å¯ä»¥å¯¹ä¸Šï¼Œå€’ä¹Ÿçœäº‹ `src="../../images/swiper/{{ imgNum }}.jpg"`

è‡ªå®šä¹‰è½®æ’­å›¾æŒ‡é’ˆå€ŸåŠ©ä¸€ä¸ªçŠ¶æ€è¿›è¡Œæ¯”å¯¹æ¯”åŒ¹é…åŠ¨æ€æ ·å¼

```html
<navigation-bar></navigation-bar>
<view>
	<!-- èƒŒæ™¯é«˜æ–¯æ¨¡ç³Šæ•ˆæœ -->
	<view class="index_bg_box">
		<image
			class="bg_img"
			src="../../images/swiper/{{ imgNum }}.jpg"
			mode="widthFix"
		></image>
		<view class="style_box"></view>
	</view>

	<!-- è½®æ’­å›¾ -->
	<swiper
		autoplay="true"
		interval="5000"
		duration="500"
		indicator-color="#999"
		indicator-active-color="#fff"
		circular="true"
		bindchange="swiperFunc"
	>
		<block wx:for="{{ swiperList }}" wx:key="item.id">
			<swiper-item>
				<view class="swiper-item">
					<image src="{{ item.url }}" mode="aspectFill"></image>
				</view>
			</swiper-item>
		</block>
	</swiper>

	<!-- è‡ªå®šä¹‰è½®æ’­å›¾æŒ‡é’ˆ -->
	<view class="strip_box">
		<view
			class="{{ imgNum == item.id ? 'strip strip_av' : 'strip' }}"
			wx:for="{{ swiperList }}"
			wx:key="item.id"
		></view>
	</view>

	<!-- å‰©ä½™æ‰€æœ‰åŠŸèƒ½ç›’å­ -->
	<view class="container">
		<!-- é€‰é¡¹å¡ -->
		<view class="control">
			<view class="control_little">
				<view class="img_box">
					<image src="../../images/sign.png" mode="widthFix"></image>
				</view>
				<text>æ¯æ—¥ç­¾åˆ°</text>
			</view>
			<view class="control_little">
				<view class="img_box">
					<image src="../../images/hot.png" mode="widthFix"></image>
				</view>
				<text>çƒ­é—¨ç²¾é€‰</text>
			</view>
			<view class="control_little">
				<view class="img_box">
					<image src="../../images/active.png" mode="widthFix"></image>
				</view>
				<text>æ´»åŠ¨ä¸“åŒº</text>
			</view>
			<view class="control_little">
				<view class="img_box">
					<image src="../../images/feed.png" mode="widthFix"></image>
				</view>
				<text>æ„è§åé¦ˆ</text>
			</view>
		</view>

		<image class="hr" src="../../images/hr3.png" mode="widthFix"></image>

		<!-- çƒ­é—¨è¯é¢˜ -->
		<view class="hot_say">
			<view class="title">
				<text class="title_text">çƒ­é—¨è¯é¢˜</text>
				<text class="title_more">æ›´å¤š ></text>
			</view>

			<view class="hot_list">
				<view class="list_box" wx:for="{{ hotNewsList }}" wx:key="item.id">
					<text># ğŸ–ï¸ {{ item.newsTitle }}</text>
				</view>
			</view>
		</view>

		<image class="hr_rev" src="../../images/hr3.png" mode="widthFix"></image>

		<!-- åˆ‡æ¢åˆ—è¡¨ -->
		<view class="select_list">
			<select-list></select-list>
		</view>
	</view>
</view>
```

æ— è®ºæ˜¯ `wxml` ä¸­æåˆ°çš„ `<navigation-bar></navigation-bar>` è¿˜æ˜¯ `<select-list></select-list>` éƒ½æ˜¯è‡ªå®šä¹‰ç»„ä»¶ï¼Œä¸è¦å¿˜è®°åœ¨å¯¹åº”é¡µé¢ JSON æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š

```json
{
	"usingComponents": {
		"mp-searchbar": "weui-miniprogram/searchbar/searchbar",
		"navigation-bar": "/components/navbar/navbar",
		"select-list": "/components/list/list"
	}
}
```

`index.wxss` ç¼–å†™

```css
/* å¯¼å…¥weuiæ ·å¼ */
@import "../../miniprogram_npm/weui-miniprogram/weui-wxss/dist/style/weui.wxss";

.index_bg_box {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	overflow: hidden;
	z-index: -9;
}

.index_bg_box .bg_img {
	width: 100%;
	filter: blur(10px);
}

.index_bg_box .style_box {
	position: absolute;
	top: 70%;
	left: -50%;
	width: 300vw;
	height: 150vw;
	background-color: #ffffff;
}

/* è½®æ’­å›¾ */
swiper {
	margin: 24rpx 0;
	overflow: hidden;
}

.swiper-item {
	height: 100%;
	margin: 0 24rpx;
}

.swiper-item image {
	width: 100%;
	height: 100%;
	border-radius: 12rpx;
}

.strip_box {
	width: 50vw;
	display: grid;
	grid-template-columns: repeat(5, 1fr);
	margin: 0 auto;
}

.strip {
	height: 2px;
	background-color: #efefef;
	margin: 0 2px;
}

.strip_av {
	background-color: #000;
}

.container {
	background-color: #fff;
}

/* é€‰é¡¹å¡ */
.control {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	text-align: center;
	font-size: 24rpx;
	margin-top: 48rpx;
	background-color: #fff;
}

.control_little {
	display: grid;
	grid-template-rows: repeat(2, 1fr);
	justify-self: center;
	align-self: center;
}

.control_little .img_box {
	margin: 24rpx;
	margin-bottom: 12rpx;
}

.control_little .img_box image {
	width: 100%;
}

.hr {
	width: 100%;
}

.hr_rev {
	width: 100%;
	transform: rotate(180deg);
}

/* çƒ­é—¨è¯é¢˜ */
.hot_say {
	padding: 24rpx;
	margin-top: 0;
	background-color: #fff;
}
.hot_say .title {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	align-content: flex-end;
	align-items: center;
	margin-bottom: 24rpx;
}

.title .title_text {
	font-weight: bold;
	font-size: 38rpx;
}

.title .title_more {
	font-size: 24rpx;
	justify-self: self-end;
	color: #404040;
}

.hot_list {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	font-size: 24rpx;
}

.list_box text {
	display: block;
	margin: 12rpx 0;
	width: 300rpx;
	color: #404040;
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}
```

`index.js` ç¼–å†™

ç›‘å¬è½®æ’­å›¾äº‹ä»¶å¯¹è±¡ä¸è§†å›¾å±‚è¿›è¡Œä¸€ä¸ªç®€å•äº¤äº’ã€é¡µé¢æ‰“å¼€è¿›è¡Œä¸€æ¬¡æ•°æ®è¯·æ±‚

```javascript
Page({
	data: {
		// è¯·å…è®¸æˆ‘ä¸ºäº†æ•ˆæœæ›´å¥½åœ¨è½®æ’­å›¾ä¸­ä½¿ç”¨æœ¬åœ°å›¾ç‰‡èµ„æº
		swiperList: [
			{
				id: 1,
				url: "../../images/swiper/1.jpg",
			},
			{
				id: 2,
				url: "../../images/swiper/2.jpg",
			},
			{
				id: 3,
				url: "../../images/swiper/3.jpg",
			},
			{
				id: 4,
				url: "../../images/swiper/4.jpg",
			},
			{
				id: 5,
				url: "../../images/swiper/5.jpg",
			},
		],
		imgNum: 1,
		hotNewsList: [],
		navShow: false,
	},
	// ç›‘å¬è½®æ’­å›¾äº‹ä»¶
	swiperFunc(e) {
		this.setData({
			imgNum: e.detail.current + 1,
		})
	},
	onLoad() {
		// çƒ­é—¨è¯é¢˜
		wx.request({
			url: "https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/hotNews",
			success: (res) => {
				this.setData({
					hotNewsList: res.data.list,
				})
			},
			fail: (err) => {
				console.log(err)
			},
		})
	},
	onShow() {
		// å¦‚æœæœ‰è¿™ä¸ªæ–¹æ³•å¹¶ä¸”è°ƒç”¨ getTabbar å¯ä»¥è°ƒç”¨è¿™ä¸ªå®ä¾‹
		if (typeof this.getTabBar == "function" && this.getTabBar()) {
			this.getTabBar().setData({
				// ç¬¬ä¸€é¡µ
				selected: 0,
			})
		}
	},
	onHide() {
		if (typeof this.getTabBar == "function" && this.getTabBar()) {
			this.getTabBar().setData({
				btn_show: false,
			})
		}
	},
})
```

---

# ä¸»é¡µå¼€å‘è¡¥å…… - List ç»„ä»¶

<img src="./images/index4.png" style="width:200px"></img>

### å•å…ƒæè¿°

ä¸»é¡µå¼€å‘è¡¥å…… - List ç»„ä»¶å¼€å‘

è¿™é‡Œçš„æ•°æ®ç½‘ç»œè¯·æ±‚æ¯”ä¹‹å‰çš„æ›´æœ‰æ„æ€ ğŸ˜

### å•å…ƒå®æ–½

åœ¨ä¸Šé¢çš„ä¸»é¡µå¼€å‘ä¸­æˆ‘ä»¬ä¸€å®šæ³¨æ„åˆ°äº† `<select-list></select-list>` ç»„ä»¶ï¼ˆåç«¯æˆ‘æ²¡æœ‰å†™æŸ¥è¯¢å­—ç¬¦ä¸²ã€ä½¿ç”¨å·¥å…·ç›¸å½“äºå»ºäº†ä¸‰ä¸ªè¡¨ï¼‰

æˆ‘ä»¬æ¯æ¬¡ç‚¹å‡»é€‰é¡¹çš„æ—¶å€™ï¼Œåœ¨ç‚¹å‡»äº‹ä»¶è¿›è¡Œæ•°æ®æ›´æ–°å³å¯

`list.wxml` ç¼–å†™

```html
<view class="select_title">
	<view
		class="{{ selectShow == 0 ? 'show_view' : ''}}"
		bindtap="selectShowFunc"
		data-idType="0"
		>ç²¾é€‰</view
	>
	<view
		class="{{ selectShow == 1 ? 'show_view' : ''}}"
		bindtap="selectShowFunc"
		data-idType="1"
		>æœ€æ–°</view
	>
	<view
		class="{{ selectShow == 2 ? 'show_view' : ''}}"
		bindtap="selectShowFunc"
		data-idType="2"
		>å…³æ³¨</view
	>
</view>

<view wx:for="{{ list }}" wx:key="item.id">
	<view class="list">
		<view class="people">
			<view class="prople_img">
				<image src="{{ item.peopleImg }}" mode="widthFix"></image>
			</view>
			<view class="people_text">
				<text class="title">{{ item.userName }}</text>
				<text class="cont">{{ item.commentDate }}</text>
			</view>
		</view>

		<view class="sel_title">
			<view class="sel_title_text">ç²¾é€‰</view>
			<view class="sel_title_cont">{{ item.newsTitle }}</view>
		</view>

		<view class="contant">
			<text>{{ item.newsContant }}</text>
		</view>

		<view class="img">
			<view wx:for="{{ item.img }}" wx:key="index" wx:for-item="myItem">
				<image src="{{ myItem }}" mode="aspectFill"></image>
			</view>
		</view>

		<mp-icon icon="text" color="#f4af0c" type="field"></mp-icon>

		<view class="btn">
			<view>
				<mp-icon icon="share" color="#999"></mp-icon>
				<text>{{ item.share }}</text>
			</view>
			<view>
				<mp-icon icon="comment" color="#999"></mp-icon>
				<text>{{ item.comment }}</text>
			</view>
			<view>
				<mp-icon icon="star" color="#999"></mp-icon>
				<text>{{ item.likeNum }}</text>
			</view>
		</view>
	</view>

	<view class="hr"></view>
</view>
```

`list.js` ç¼–å†™

ç»„ä»¶åœ¨åˆšè¢«åˆ›å»ºçš„æ—¶å€™é»˜è®¤è¿›è¡Œä¸€æ¬¡è¯·æ±‚ï¼Œä¹‹åçš„æ•°æ®æ›´æ–°å…¨éƒ¨äº¤ç»™ç‚¹å‡»äº‹ä»¶ï¼Œæ ¹æ®çŠ¶æ€çš„å¯¹æ¯”è¿›è¡Œæ•°æ®çš„åŒ¹é…æ›´æ–°

ä¸ºäº†ç”¨æˆ·ä½“éªŒæ›´ä½³ï¼Œä½¿ç”¨ `showLoading` API å¼¹å‡ºä¸€ä¸ªæ•°æ®è¯·æ±‚è¯·æ±‚ä¸­çš„æç¤ºæ¡†

<img src="./images/index5.png" style="width:200px"></img>

```javascript
// components/list/list.js
Component({
	/**
	 * ç»„ä»¶çš„å±æ€§åˆ—è¡¨
	 */
	properties: {},

	/**
	 * ç»„ä»¶çš„åˆå§‹æ•°æ®
	 */
	data: {
		list: [],
		selectShow: 0,
	},

	/**
	 * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
	 */
	methods: {
		selectFunc(url) {
			wx.showLoading({
				title: "æ­£åœ¨åŠ è½½æ•°æ®...",
			})
			wx.request({
				url: url,
				success: (res) => {
					this.setData({
						list: res.data.list,
					})
					wx.hideLoading({})
				},
			})
		},
		// ç›‘å¬é€‰é¡¹å¡åˆ‡æ¢ç‚¹å‡»äº‹ä»¶
		selectShowFunc(e) {
			this.setData({
				selectShow: e.currentTarget.dataset.idtype,
			})
			// é€‰é¡¹å¡åˆ—è¡¨åˆ‡æ¢
			if (e.currentTarget.dataset.idtype == 0) {
				this.selectFunc(
					"https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/choicest"
				)
			} else if (e.currentTarget.dataset.idtype == 1) {
				this.selectFunc(
					"https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/newNews"
				)
			} else if (e.currentTarget.dataset.idtype == 2) {
				this.selectFunc(
					"https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/starNews"
				)
			}
		},
	},
	// ç»„ä»¶ç›‘å¬äº‹ä»¶
	observers() {},
	created() {
		wx.request({
			url: "https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/choicest",
			success: (res) => {
				this.setData({
					list: res.data.list,
				})
			},
		})
	},
})
```

`list.json` ç¼–å†™

åœ¨ list ç»„ä»¶ä¸­æˆ‘ä»¬ä½¿ç”¨äº† Weui çš„ icon å›¾æ ‡ï¼Œæ‰€ä»¥ä¸è¦å¿˜è®°å¼•å…¥

```json
{
	"component": true,
	"usingComponents": {
		"mp-icon": "weui-miniprogram/icon/icon"
	}
}
```

`list.css` ç¼–å†™

```css
/* é€‰é¡¹åˆ—è¡¨ */
.select_list {
	padding: 24rpx 0;
	padding-bottom: 100px;
}

.select_title {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	justify-items: center;
	padding: 24rpx;
	padding-bottom: 0;
	border-bottom: 1px solid #efefef;
}

.select_title view {
	padding-bottom: 12rpx;
}

.select_title .show_view {
	font-weight: bold;
	border-bottom: 4px solid #000;
}

/* åˆ—è¡¨ */

.list {
	padding: 24rpx;
	padding-top: 48rpx;
}

.list .people {
	display: grid;
	grid-template-columns: 3fr 7fr;
}

.people .prople_img {
	margin-right: 92rpx;
}
.people image {
	width: 100%;
}

.people_text {
	display: grid;
	grid-template-rows: repeat(2, 1fr);
	align-items: center;
}

.people_text .title {
	font-weight: bold;
	font-size: 32rpx;
}

.people .cont {
	font-size: 24rpx;
	color: #404040;
}

/* ç²¾é€‰ */
.sel_title {
	display: grid;
	grid-template-columns: 2fr 8fr;
	align-items: center;
	margin: 12rpx 0;
	margin-top: 32rpx;
}

.sel_title .sel_title_text {
	width: 48rpx;
	display: inline-block;
	border: 2px solid #f4af0c;
	border-left: 5px solid #f4af0c;
	border-right: 5px solid #f4af0c;
	color: #f4af0c;
	margin: 12rpx 0;
	padding: 3rpx 12rpx;
	border-radius: 5px;
	font-size: 24rpx;
}

.sel_title_cont {
	column-rule: #404040;
	font-weight: bold;
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}

/* å†…å®¹ */
.contant {
	font-size: 24rpx;
	color: #666;
	display: -webkit-box;
	-webkit-box-orient: vertical;
	-webkit-line-clamp: 3;
	overflow: hidden;
	word-break: break-all;
	text-overflow: ellipsis;
}

/* å›¾ç‰‡ */
.img {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: 12rpx;
	margin: 24rpx 0;
}

.img view {
	height: 200rpx;
}

.img image {
	width: 100%;
	height: 100%;
}

/* æŒ‰é’® */
.btn {
	margin: 24rpx 0;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	justify-items: center;
	align-items: center;
}

.btn view {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	justify-items: center;
	align-items: center;
}

.btn text {
	display: inline-block;
	margin-left: 12rpx;
	color: #666;
}

.hr {
	width: 100vw;
	height: 24rpx;
	background-color: #eaf8ff;
}
```

---

# å¤šåŠŸèƒ½æŒ‰é’®åŒé¡µé¢å¼€å‘

<img src="./images/index2.png" style="width:200px"></img>
<img src="./images/post.png" style="width:200px"></img>

### å•å…ƒæè¿°

æ–°é¡µé¢å¼•å…¥ã€è·¯ç”±è·³è½¬ã€ç»„ä»¶çš„ä½¿ç”¨

### å•å…ƒå®æ–½

åœ¨ `page` æ–‡ä»¶å¤¹ä¸‹åˆ›å»º `postPage` æ–‡ä»¶å¤¹ï¼Œ`postPage` æ–‡ä»¶å¤¹ä¸‹å­˜æ”¾æ–°é¡µé¢é…ç½®

(é»˜è®¤æ­£å¸¸æ–¹å¼åˆ›å»ºé¡µé¢å¾®ä¿¡å°ç¨‹åºä¼šè‡ªå®šåœ¨ app.json ä¸­è¿›è¡Œé¡µé¢çš„æ³¨å†Œï¼Œå¦‚æœæ²¡æœ‰éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ³¨å†Œé¡µé¢)

ä¸»é¡µé¢å¸–å­æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶è¿›è¡Œè·¯ç”±è·³è½¬

`index.wxml` å¢åŠ å†…å®¹ ã€æ³¨æ„è¿™é‡Œçš„ index.wxml æ˜¯ TabBar çš„é¡µé¢ï¼Œä¸æ˜¯ä¸»é¡µé¢ã€‘

```html
<view class="left_state" bindtap="navto" data-path="/pages/postPage/post">
	<image src="../images/text.png" mode="heightFix"></image>
	<text>å¸–å­</text>
</view>
```

`index.js` å¢åŠ æ–¹æ³•

```javascript
	// è·¯ç”±è·³è½¬
    navto(e) {
      wx.navigateTo({
        url: e.currentTarget.dataset.path,
      })
    }
```

å¯èƒ½å¤§å®¶ç–‘æƒ‘ä¸ºä»€ä¹ˆä¸ç›´æ¥å†™è·¯ç”±è·¯å¾„ï¼Œè€Œæ˜¯è¦å†™ä¸€ä¸ªæ–¹æ³•ä¼ å‚ï¼Œè¿™æ˜¯å› ä¸ºæœ‰ä¿©ä¸ªæŒ‰é’®ï¼Œæˆ‘ä»¬å¼€å‘ä¸‹ä¸€ä¸ªé¡µé¢å°±ä¸éœ€è¦é‡æ–°å®šä¹‰æ–¹æ³•äº†

æœ€åæˆ‘ä»¬å¯¹å¸–å­é¡µé¢çš„ json æ–‡ä»¶è¿›è¡Œä¸€ä¸ªé¡¶éƒ¨å¯¼èˆªæ é…ç½®

```json
{
	"usingComponents": {},
	"navigationStyle": "default",
	"navigationBarTitleText": "å¸–å­"
}
```

ç±»ä¼¼æ–¹æ³•å¼€å‘åé¦ˆé¡µé¢

```html
<view class="right_state" bindtap="navto" data-path="/pages/feedback/feedback">
	<image src="../images/feedback.png" mode="heightFix"></image>
	<text>é—®é¢˜/éœ€æ±‚åé¦ˆ</text>
</view>
```

```json
{
	"usingComponents": {},
	"navigationStyle": "default",
	"navigationBarTitleText": "æ„è§åé¦ˆ"
}
```

ç»§ç»­å¼€å‘å¸–å­é¡µé¢ï¼Œæˆ‘æ‰“ç®—ç›´æ¥å°†ä¹‹å‰å¼€å‘çš„ List ç»„ä»¶è¿›è¡Œä¸€ä¸ªå¼•å…¥ï¼Œå®è¯å®è¯´è¿™ä¸ªé¡µé¢æœ‰ç‚¹å·æ‡’äº† ğŸ˜

```json
{
	"usingComponents": {
		"select-list": "/components/list/list"
	},
	"navigationStyle": "default",
	"navigationBarTitleText": "å¸–å­"
}
```

```html
<select-list></select-list>
```

---

# åé¦ˆé¡µé¢å¼€å‘

<img src="./images/feedback.png" style="width:200px"></img>
<img src="./images/feedback2.png" style="width:200px"></img>
<img src="./images/feedback3.png" style="width:200px"></img>

### å•å…ƒæè¿°

å¾®ä¿¡å°ç¨‹åºæ¨¡æ€æ¡† API ä½¿ç”¨ã€æ¨¡æ‹Ÿè¯·æ±‚æœåŠ¡å™¨ä¸ç”¨æˆ·äº¤äº’

### å•å…ƒå®æ–½

`feedback,wxml` ç¼–å†™

```html
<view class="feedback">
	<form action="" bindsubmit="formSubmit">
		<textarea
			class="textarea"
			placeholder="æ„è§åé¦ˆ (é™åˆ¶5000å­—)"
			maxlength="5000"
			name="feedback"
		></textarea>

		<button class="btn" formType="submit" style="width: 90vw;">æäº¤åé¦ˆ</button>
	</form>
</view>
```

`feedback.js` å¢åŠ 

æ¨¡æ‹ŸæœåŠ¡ç«¯è¯·æ±‚æ—¶é—´è¿›è¡Œä¸€ä¸ªäº¤äº’æ•ˆæœï¼Œè§¦å‘è¡¨å•æäº¤äº‹ä»¶å°†ä¼šè§¦å‘è¯¥å‡½æ•°ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥çš„ä¸æ˜¯ç©ºæ ¼ä»¥åŠæ²¡æœ‰è¾“å…¥ï¼Œå°†ä¼šå¼¹å‡ºæç¤ºæ¨¡æ€æ¡†è¯¢é—®ç”¨æˆ·ï¼Œç‚¹å‡»ç¡®è®¤å°†ä¼šè¿›è¡Œä¸€ä¸ªé•¿è¾¾ 1 ç§’çš„è¯·æ±‚ç„¶åæ‰“å°å‡ºç”¨æˆ·æäº¤çš„å†…å®¹ï¼Œå› ä¸ºç›®å‰æ²¡æœ‰æœåŠ¡å™¨ç«¯é…åˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰“å°å‡ºæ¥å°± OK äº†

```javascript
formSubmit(e) {
if(e.detail.value.feedback.trim()) {
    // æ¨¡æ‹ŸæœåŠ¡ç«¯è¯·æ±‚æ—¶é—´
    wx.showModal({
        cancelColor: 'dd',
        cancelColor:'#eb0c0c',
        title:"æ‚¨ç¡®è®¤æäº¤æ­¤åé¦ˆå—",
        success: res => {
          if (res.confirm) {
              wx.showLoading({
                  title:'æ­£åœ¨æäº¤...',
                  mask: true,
                  success() {
                    setTimeout(function () {
                        wx.hideLoading()
                        console.log(e.detail.value.feedback)
                      }, 1000)
                  }
              })
            }
        }
    })
} else {
    wx.showToast({
      title: 'è¯·å…ˆè¾“å…¥å†…å®¹',
      icon:'error'
    })
}
}
```

`feedback.css` ç¼–å†™

```css
.feedback {
	margin: 24rpx;
}

.textarea {
	height: 50vh;
	min-width: 87vw;
	padding: 24rpx;
	border-radius: 24rpx;
	background-color: #efefef;
	color: #404040;
	overflow: auto;
}

/* æŒ‰é’® */
.btn {
	background-color: #f4af0c;
	text-align: center;
	padding: 24rpx 0;
	margin: 24rpx 0;
	border-radius: 24rpx;
	color: #fff;
}
```

---

# ç”¨æˆ·ä¸ªäººé¡µé¢å¼€å‘

<img src="./images/my1.png" style="width:200px"></img>
<img src="./images/my2.png" style="width:200px"></img>

### å•å…ƒæè¿°

- å¾®ä¿¡ç™»å½•è¯·æ±‚
- å®ç°å¾®ä¿¡ç™»å½•è·å–æ˜µç§°ä»¥åŠå¤´åƒä¿¡æ¯è¿›è¡Œæ•°æ®æ¸²æŸ“ä¸æ›´æ–°
- å¾®ä¿¡ç™»å½•æˆåŠŸè¿›è¡Œ ajax ç½‘ç»œè¯·æ±‚ç”¨æˆ·æ•°æ®ï¼ˆä½¿ç”¨å·¥å…·æ¨¡æ‹Ÿçš„æ•°æ®ï¼‰
- ä¸Šä¼ å›¾ç‰‡å®æ—¶åŠ¨æ€æ¸²æŸ“æ›´æ–°è‡³è§†å›¾å±‚

### å•å…ƒå®æ–½

`my.wxml` é¡µé¢ç¼–å†™

å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œåˆ™ä¸æ˜¾ç¤ºç­‰çº§ä¿¡æ¯ä»¥åŠç”¨æˆ·ä¸ªäººä¿¡æ¯ï¼Œä½¿ç”¨ `wx:if` åŠ¨æ€æ¸²æŸ“ã€å› ä¸ºåˆ‡æ¢ä¸é¢‘ç¹ï¼Œæ— éœ€è€ƒè™‘æ€§èƒ½é—®é¢˜

```html
<image class="top_img" src="{{ backImg }}" mode="widthFix"></image>
<image class="hr" src="../../images/hr3.png" mode="widthFix"></image>

<!-- ç”¨æˆ·ä¿¡æ¯ -->
<view class="user">
	<view class="user_img">
		<view class="img">
			<image src="{{ avatarUrl }}" mode="widthFix"></image>
		</view>
		<view class="text">
			<mp-icon icon="pencil" color="#f4af0c" size="{{ 18 }}"></mp-icon>
			<text bindtap="choImg"> è®¾ç½®èƒŒæ™¯</text>
		</view>
	</view>

	<view class="user_name">
		<view>{{ username }}</view>
		<text>è¿™ä¸ªäººå¾ˆæ‡’ä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹</text>
	</view>

	<view class="user_message">
		<view>
			<view>å…³æ³¨</view>
			<text>{{ userdata.concern }}</text>
		</view>
		<view>
			<view>ç²‰ä¸</view>
			<text>{{ userdata.fans }}</text>
		</view>
		<view>
			<view>è·èµ</view>
			<text>{{ userdata.like }}</text>
		</view>
		<view>
			<view>ç§¯åˆ†</view>
			<text>{{ userdata.integral }}</text>
		</view>
	</view>
</view>

<image class="hr_rev" src="../../images/hr3.png" mode="widthFix"></image>

<!-- æ•°æ®æ¨¡å— -->
<view class="database" wx:if="{{ usershow }}">
	<view class="data_title">
		<text class="title">é…·å®¢ç©ºé—´</text>
		<text>å‘å¸ƒçƒ­æ–‡å¯ä»¥ç¥ä½ å¿«é€Ÿå‡çº§å“¦</text>
	</view>

	<view class="data">
		<view class="title">æˆ‘çš„ç­‰çº§ : {{ userdata.plan }}</view>
		<view class="more">æ›´å¤š ></view>
	</view>

	<view class="data_progress">
		<progress
			percent="{{ userdata.plan }}"
			border-radius="12rpx"
			stroke-width="18rpx"
			color="#f4af0c"
			active
		></progress>
	</view>

	<view class="medal">
		<view class="title">æˆ‘çš„å‹‹ç« </view>
		<view class="more">æ›´å¤š ></view>
	</view>

	<view class="tips">æ‚¨è¿˜æœªè·å¾—å‹‹ç« </view>
</view>

<!-- ç”¨æˆ·ç™»å½• -->
<button
	class="login_btn"
	open-type="getUserInfo"
	bindtap="getUserInfo"
	wx:if="{{ !usershow }}"
>
	ç‚¹å‡»ç™»å½•ï¼ˆæˆæƒï¼‰
</button>
```

è¯¥é¡µé¢å¼•å…¥ weui ç»„ä»¶åº“ icon å›¾æ ‡

`my.json`

```json
{
	"usingComponents": {
		"mp-icon": "weui-miniprogram/icon/icon"
	}
}
```

`my.wxss` æ ·å¼ç¼–å†™

```css
@import "../../miniprogram_npm/weui-miniprogram/weui-wxss/dist/style/weui.wxss";

.top_img {
	width: 100vw;
}

.hr {
	width: 100%;
}

.hr_rev {
	width: 100%;
	transform: rotate(180deg);
}

/* ç”¨æˆ·å¤´åƒ */
.user_img {
	width: 100vw;
	height: 48rpx;
	display: grid;
	grid-template-columns: repeat(2, 1fr);
}

.user_img .img {
	margin: 150rpx;
	margin-top: -150rpx;
	margin-left: 48rpx;
	border-radius: 50%;
	border: 1px solid #fff;
}

.user_img .img image {
	width: 100%;
	border-radius: 50%;
}

.user_img .text {
	height: 32rpx;
	line-height: 32rpx;
	justify-self: end;
	padding: 6rpx 12rpx;
	margin: 0 24rpx;
	border: 2px solid #f4af0c;
	border-radius: 12rpx;
	font-size: 24rpx;
	color: #f4af0c;
}

/* ç”¨æˆ·å */
.user_name {
	margin: 32rpx 24rpx;
}

.user_name view {
	font-weight: bold;
	font-size: 40rpx;
	margin: 24rpx;
	margin-bottom: 0;
}

.user_name text {
	margin-left: 24rpx;
	font-size: 24rpx;
	color: #666;
}

/* ç”¨æˆ·ä¿¡æ¯ */
.user_message {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	padding: 24rpx 0;
	justify-items: center;
	text-align: center;
}

.user_message text {
	color: #999;
}

/* æ•°æ®æ¨¡å— */
.database {
	margin: 24rpx;
	padding-bottom: 150rpx;
}

.data_title {
	margin-bottom: 32rpx;
}

.database text {
	font-size: 24rpx;
	color: #666;
}

.database .title {
	font-size: 40rpx;
	font-weight: bold;
	margin-right: 48rpx;
	color: #000;
}

.database .data,
.database .medal {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	align-items: center;
}

.data .title,
.medal .title {
	font-size: 28rpx;
}

.data .more,
.medal .more {
	font-size: 24rpx;
	color: #666;
	justify-self: end;
}

/* è¿›åº¦æ¡ */
.data_progress {
	margin: 32rpx 0;
	color: #666;
}

.tips {
	margin: 32rpx 0;
	text-align: center;
}

/* ç™»å½•æŒ‰é’® */
.login_btn {
	margin-top: 24rpx;
	background-color: #f4af0c;
	color: #fff;
}
```

`my.js`

ä½¿ç”¨ `chooseMedia` API è¿›è¡Œæœ¬åœ°å›¾ç‰‡åœ°å€çš„è§£æï¼Œæ²¡æœ‰ä¸Šä¼ å›¾åºŠçš„åŠ¨ä½œï¼Œç›´æ¥æ‹¿æ¥æ¸²æŸ“è§†å›¾

ä½¿ç”¨ `getUserProfile` API è·å–ç”¨æˆ·æ•°æ®ã€‚ç”¨æˆ·ç¡®è®¤è¢«è·å–æ•°æ®ä¹‹åæ¸²æŸ“è§†å›¾çš„åŒæ—¶ç»§ç»­è¿›è¡Œ Ajax è¯·æ±‚ç”¨æˆ·å…¶ä½™æ•°æ®ï¼Œè¿™éƒ¨åˆ†æ•°æ®æ¥æºäºå¤–éƒ¨ç½‘ç«™å·¥å…·æ¨¡æ‹Ÿæ•°æ®

```javascript
Page({
	data: {
		userdata: {
			plan: 60,
			concern: 0,
			fans: 0,
			like: 0,
			integral: 0,
		},
		username: "ç”¨æˆ·å",
		avatarUrl: "../../images/people2.png",
		usershow: false,
		backImg: "../../images/swiper/2.jpg",
	},
	// è·å–æœ¬åœ°å›¾ç‰‡åœ°å€æ›´æ–°è§†å›¾
	choImg() {
		wx.chooseMedia({
			count: 1,
			success: (res) => {
				this.setData({
					backImg: res.tempFiles[0].tempFilePath,
				})
			},
		})
	},
	getUserInfo(e) {
		// ç™»å½•è·å–ç”¨æˆ·ä¿¡æ¯
		wx.getUserProfile({
			desc: "æˆæƒèƒ¶å›Šæ˜Ÿçƒå°ç¨‹åº",
			success: (res) => {
				this.setData({
					usershow: true,
					username: res.userInfo.nickName,
					avatarUrl: res.userInfo.avatarUrl,
				})
				// ç”¨æˆ·è·å–ä¿¡æ¯æˆåŠŸè¿›è¡Œajaxè¯·æ±‚æ¨¡æ‹Ÿæ•°æ®
				wx.request({
					url: "https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/userMessage",
					success: (res) => {
						this.setData({
							userdata: res.data[0],
						})
					},
				})
			},
		})
	},
	onShow() {
		// å¦‚æœæœ‰è¿™ä¸ªæ–¹æ³•å¹¶ä¸”è°ƒç”¨ getTabbar å¯ä»¥è°ƒç”¨è¿™ä¸ªå®ä¾‹
		if (typeof this.getTabBar == "function" && this.getTabBar()) {
			this.getTabBar().setData({
				// ç¬¬ä¸€é¡µ
				selected: 3,
			})
		}
	},

	/**
	 * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè—
	 */
	onHide() {
		if (typeof this.getTabBar == "function" && this.getTabBar()) {
			this.getTabBar().setData({
				btn_show: false,
			})
		}
	}
```

---

# ç­¾åˆ°é¡µé¢å¼€å‘

<img src="./images/sign.png" style="width:200px"></img>
<img src="./images/sign2.png" style="width:200px"></img>

### å•å…ƒæè¿°

- æ–°å»º activityã€hotã€sign é¡µé¢ï¼Œå¼€å‘ç­¾åˆ°é¡µé¢
- æœ¬åœ°æ•°æ®æŒä¹…åŒ–ç´¯è®¡ç­¾åˆ°å¤©æ•°
- è®¡ç®—æ—¶é—´æ¯æ—¥ 12 ç‚¹è¿›è¡Œä¸€å°æ—¶ç­¾åˆ°æ´»åŠ¨
- æœ¬åœ°å­˜å‚¨æ•°æ®ä¸é€»è¾‘å±‚ä»¥åŠè§†å›¾å±‚çš„é¢‘ç¹äº¤äº’

### å•å…ƒå®æ–½

åœ¨ `pages` æ–‡ä»¶å¤¹ä¹‹ä¸‹æ–°å»ºå¥½ä¸‰ä¸ªé¡µé¢ï¼Œä¹‹ååœ¨ `index` ä¸»é¡µé¢é…ç½®è·³è½¬è·¯å¾„ï¼Œå¼€å‘ç­¾åˆ°é¡µé¢ï¼Œä¸ºåç»­å¼€å‘å…¶ä»–é¡µé¢åšé“ºå«

```html
<!-- é€‰é¡¹å¡ -->
<view class="control">
	<view class="control_little">
		<view class="img_box" bindtap="navTo" data-path="/pages/sign/sign">
			<image src="../../images/sign.png" mode="widthFix"></image>
		</view>
		<text>æ¯æ—¥ç­¾åˆ°</text>
	</view>
	<view class="control_little">
		<view class="img_box" bindtap="navTo" data-path="/pages/hot/hot">
			<image src="../../images/hot.png" mode="widthFix"></image>
		</view>
		<text>çƒ­é—¨ç²¾é€‰</text>
	</view>
	<view class="control_little">
		<view class="img_box" bindtap="navTo" data-path="/pages/activity/activity">
			<image src="../../images/active.png" mode="widthFix"></image>
		</view>
		<text>æ´»åŠ¨ä¸“åŒº</text>
	</view>
	<view class="control_little">
		<view class="img_box" bindtap="navTo" data-path="/pages/feedback/feedback">
			<image src="../../images/feed.png" mode="widthFix"></image>
		</view>
		<text>æ„è§åé¦ˆ</text>
	</view>
</view>
```

`index.js` å¢åŠ 

```javascript
  // é¡µé¢è·³è½¬
  navTo(e) {
    wx.navigateTo({
      url: e.currentTarget.dataset.path,
    })
  }
```

æ–°å»ºé¡µé¢é…ç½®

```json
{
	"usingComponents": {},
	"navigationStyle": "default",
	"navigationBarTitleText": "æ¯æ—¥ç­¾åˆ°"
}

{
    "usingComponents": {},
    "navigationStyle": "default",
    "navigationBarTitleText": "æ´»åŠ¨ä¸“åŒº"
}

{
    "usingComponents": {},
    "navigationStyle": "default",
    "navigationBarTitleText": "çƒ­é—¨ç²¾é€‰"
}
```

ç°åœ¨ç‚¹å‡»ä¸»é¡µå¯¹åº”æŒ‰é’®å¯ä»¥å®ç°è·³è½¬åŠŸèƒ½ï¼Œæˆ‘ä»¬ç¼–å†™ `sign.wxml` ç­¾åˆ°é¡µé¢

```html
<view class="sign">
	<view class="title">
		<view><text>èƒ¶å›Š âš¡ </text> å……ç”µç«™</view>
		<view class="sign_data">å·²æŒç»­ç­¾åˆ° <text>{{ signDate }}</text> å¤©</view>
	</view>
	<progress
		class="progress"
		active-mode="forwards"
		active
		color="#f4af0c"
		percent="{{ percent }}"
		border-radius="92rpx"
		stroke-width="92rpx"
	></progress>
	<button class="btn" disabled="{{ disabled }}" bindtap="signAdd">
		ç‚¹å‡»ç­¾åˆ°
	</button>
</view>
```

ç­¾åˆ°é¡µé¢æ ·å¼ `sign.wxss` ç¼–å†™

```css
.sign {
	height: 100vh;
	display: grid;
	grid-template-rows: repeat(3, 1fr);
	background: linear-gradient(to bottom, #000 0%, rgba(0, 0, 0, 0.15) 100%),
		radial-gradient(
				at top center,
				rgba(255, 255, 255, 0.4) 0%,
				rgba(0, 0, 0, 0.4) 120%
			) #989898;
	background-blend-mode: multiply, multiply;
	color: #ffffff;
	text-align: center;
}

.title {
	font-size: 64rpx;
	padding: 92rpx 0;
}

.title text {
	color: #f4af0c;
	font-weight: bold;
	font-style: oblique;
	text-shadow: 1px 1px 2px #f4af0c;
}

.sign_data {
	padding-top: 24rpx;
	font-size: 32rpx;
}

/* è¿›åº¦æ¡ */
.progress {
	margin: 0 48rpx;
}

.btn {
	height: 80rpx;
	background-color: #efefef;
	color: #f4af0c;
	box-shadow: 1px 1px 2px #f4af0c;
}
```

`sign.js` ç¼–å†™

æ¯åˆ°ä¸­åˆ 12 ç‚¹è¿›è¡Œç­¾åˆ°æ´»åŠ¨ï¼ˆæ”¹å˜æœ¬åœ°æ•°æ®åŒæ­¥æ¸²æŸ“è‡³è§†å›¾ï¼Œä½¿æŒ‰é’®æ¥è§¦ç¦ç”¨ï¼‰

æ¯æ¬¡æ‰“å¼€é¡µé¢éƒ½å°†è·å–ä¸Šæ¬¡æœ¬åœ°å­˜å‚¨æ•°æ®è¿›è¡ŒåŒæ­¥æ¸²æŸ“è§†å›¾ï¼Œå¦‚æœä¸Šæ¬¡æ²¡æœ‰æœ¬åœ°å­˜å‚¨è®°å½•ï¼Œé‚£ä¹ˆé»˜è®¤åˆ›å»ºä¸€ä¸ªåˆå§‹ç­¾åˆ°å€¼å°†å…¶åšä¸€ä¸ªæ•°æ®æŒä¹…åŒ–

å¦‚æœæŒ‰é’®å¯ä»¥ç‚¹å‡»ï¼Œå°†è§¦å‘è‡ªå®šä¹‰ `signAdd` å‡½æ•°ï¼Œå¦‚æœè¾¾åˆ°æœ€å¤§ç­¾åˆ°å€¼ï¼Œé‚£ä¹ˆå½’é›¶åè¿›è¡Œç­¾åˆ°æ“ä½œï¼Œå¦‚æœæ²¡æœ‰è¾¾åˆ°æœ€å¤§ç­¾åˆ°å€¼ï¼Œé‚£ä¹ˆç›´æ¥æ‰§è¡Œç­¾åˆ°åŠ¨ä½œï¼Œæ›´æ”¹æœ¬åœ°å­˜å‚¨æ•°æ®å¹¶åŒæ­¥æ¸²æŸ“è‡³è§†å›¾

```javascript
// pages/sign/sign.js
Page({
	/**
	 * é¡µé¢çš„åˆå§‹æ•°æ®
	 */
	data: {
		signDate: 0,
		percent: 0,
		disabled: false,
	},

	/**
	 * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
	 */
	onLoad(options) {
		// æ¯æ—¥ä¸­åˆ 12 ç‚¹è¿›è¡Œä¸€ä¸ªé•¿è¾¾ä¸€å°æ—¶çš„ç­¾åˆ°æ´»åŠ¨
		if (new Date().getHours() === 12) {
			wx.setStorageSync("signDisabled", false)
		}
		const date = wx.getStorageSync("signDate")
		if (date) {
			this.setData({
				signDate: date,
				percent: date * 10,
				disabled: wx.getStorageSync("signDisabled"),
			})
		} else {
			wx.setStorageSync("signDate", 0)
		}
	},
	// ç‚¹å‡»ç­¾åˆ°äº‹ä»¶
	signAdd() {
		if (Number(wx.getStorageSync("signDate")) === 10) {
			wx.setStorageSync("signDate", 0)
			this.setData({
				signDate: date,
				percent: date * 10,
			})
		}

		wx.setStorageSync("signDate", Number(wx.getStorageSync("signDate")) + 1)
		const date = wx.getStorageSync("signDate")
		wx.setStorageSync("signDisabled", true)
		this.setData({
			signDate: date,
			percent: date * 10,
			disabled: true,
		})
	},
})
```

---

# çƒ­é—¨ç²¾é€‰é¡µé¢å¼€å‘

<img src="./images/hot.png" style="width:200px"></img>

### å•å…ƒæè¿°

- ajax è¯·æ±‚çƒ­é—¨ç²¾é€‰æ•°æ®æ¸²æŸ“è§†å›¾å®Œæˆçƒ­é—¨ç²¾é€‰é¡µé¢

### å•å…ƒå®æ–½

`hot.wxml` ç¼–å†™

```html
<view wx:for="{{ list }}" wx:key="item.id">
	<view class="hr"></view>
	<view class="hot">
		<image src="{{ item.img }}" mode="widthFix"></image>

		<view class="title">{{ item.newsTitle }}</view>

		<view class="hot_message">
			<text class="time">{{ item.Date }}</text>
			<view class="hot_data">
				<text>ğŸ‘ï¸â€ğŸ—¨ï¸</text>
				<text class="text_num">{{ item.see }}</text>
			</view>
		</view>
	</view>
</view>
```

`hot.wxss` ç¼–å†™

```css
image {
	width: 100%;
}

.hr {
	width: 100vw;
	height: 24rpx;
	background-color: #eaf8ff;
}

.hot {
	margin: 32rpx;
}

.title {
	margin: 24rpx 0;
	font-size: 32rpx;
	font-weight: bold;
}

.hot_message {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	align-items: center;
	margin: 24rpx 0;
	padding-bottom: 24rpx;
}

.hot_message .time,
.hot_message .hot_data {
	color: #666;
	font-size: 24rpx;
}

.hot_message .hot_data {
	justify-self: end;
}

.text_num {
	display: inline-block;
	margin-left: 6rpx;
}
```

`hot.js` ç¼–å†™

```javascript
Page({
	data: {
		list: [],
	},
	onLoad(options) {
		wx.request({
			url: "https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/hot",
			success: (res) => {
				this.setData({
					list: res.data.list,
				})
			},
		})
	},
})
```

---

# æ´»åŠ¨ä¸“åŒºé¡µé¢å¼€å‘

<img src="./images/activity.png" style="width:200px"></img>

### å•å…ƒæè¿°

- ajax è¯·æ±‚çƒ­é—¨ç²¾é€‰æ•°æ®æ¸²æŸ“è§†å›¾å®Œæˆæ´»åŠ¨ä¸“åŒºé¡µé¢

### å•å…ƒå®æ–½

ä¸çƒ­é—¨ç²¾é€‰æ¨¡å—ç±»ä¼¼

`activity.json` å¢åŠ  Weui ç»„ä»¶åº“å›¾æ ‡ç»„ä»¶

```json
{
	"usingComponents": {
		"mp-icon": "weui-miniprogram/icon/icon"
	},
	"navigationStyle": "default",
	"navigationBarTitleText": "æ´»åŠ¨ä¸“åŒº"
}
```

`activity.wxml` ç¼–å†™

```html
<view wx:for="{{ list }}" wx:key="item.id">
	<view class="hr"></view>
	<view class="active">
		<view class="title">
			<mp-icon
				type="field"
				icon="photo-wall"
				color="#f4af0c"
				size="{{25}}"
			></mp-icon>
			<view>{{ item.newsTitle }}</view>
		</view>

		<image src="{{ item.img }}" mode="widthFix"></image>

		<view class="message">
			<view class="message_data">
				<mp-icon icon="comment" color="#f4af0c" size="{{18}}"></mp-icon>
				<view>{{ item.see }}</view>
			</view>
			<view class="message_data">
				<mp-icon icon="star" color="#f4af0c" size="{{18}}"></mp-icon>
				<view>{{ item.comment }}</view>
			</view>
		</view>
	</view>
</view>

<view class="tips">æ›´å¤šæ´»åŠ¨ æ•¬è¯·æœŸå¾… ...</view>
```

`activity.wxss` ç¼–å†™

```css
.hr {
	width: 100vw;
	height: 24rpx;
	background-color: #eaf8ff;
}

image {
	width: 100%;
	border-radius: 12rpx;
}

.active {
	margin: 24rpx;
}

.title {
	font-weight: bold;
	display: grid;
	grid-template-columns: 1fr 9fr;
	margin: 24rpx 0;
}

.message,
.message_data {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	width: 15vw;
	margin: 12rpx 0;
	align-items: center;
	color: #666;
	font-size: 28rpx;
}

.tips {
	text-align: center;
	padding: 32rpx;
	color: #666;
	font-size: 26rpx;
}
```

`activity.js` ç¼–å†™

```javascript
Page({
	data: {
		list: [],
	},
	onLoad(options) {
		wx.request({
			url: "https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/activity",
			success: (res) => {
				this.setData({
					list: res.data.list,
				})
			},
		})
	},
})
```

---

# æ¿å—é¡µé¢å¼€å‘

<img src="./images/plate.png" style="width:200px"></img>
<img src="./images/plate2.png" style="width:200px"></img>

### å•å…ƒæè¿°

- ç‚¹å‡»å¯¹åº”é€‰é¡¹å®ç°åˆ†åŒºæ•°æ®è¯·æ±‚å¹¶åŒæ­¥æ¸²æŸ“è§†å›¾
- å°è£…æ–¹æ³•ï¼Œç§‰æ‰¿ä¸é‡å¤åŸåˆ™

### å•å…ƒå®æ–½

`plate.json` ç¼–å†™

å¼•å…¥è‡ªå®šä¹‰å¯¼èˆªç»„ä»¶

```json
{
	"usingComponents": {
		"navigation-bar": "/components/navbar/navbar"
	}
}
```

`plate.html`

```html
<navigation-bar></navigation-bar>
<view class="plate">
	<view class="plate_lists">
		<view
			class="{{ acive == 0 ? 'list list_acive' : 'list'}}"
			bindtap="aciveFunc"
			data-type="0"
			>ç¨‹åºå‘˜æ˜Ÿçƒ</view
		>
		<view
			class="{{ acive == 1 ? 'list list_acive' : 'list'}}"
			bindtap="aciveFunc"
			data-type="1"
			>é‡‘èæ˜Ÿçƒ</view
		>
		<view
			class="{{ acive == 2 ? 'list list_acive' : 'list'}}"
			bindtap="aciveFunc"
			data-type="2"
			>å…¶ä»–æ˜Ÿçƒ</view
		>
	</view>

	<view class="contant">
		<view class="contant_list" wx:for="{{ programmingList }}" wx:key="item.id">
			<view class="img">
				<image src="{{ item.img }}" mode="widthFix"></image>
			</view>
			<text>{{ item.appType }}</text>
		</view>
	</view>
</view>
```

`plate.css` ç¼–å†™

```css
.plate {
	display: grid;
	grid-template-columns: 3fr 7fr;
}

.plate_lists {
	text-align: center;
}

.plate_lists .list {
	margin: 48rpx 24rpx;
	border-bottom: 1px solid #e6e6e6;
	padding-bottom: 12rpx;
}

.contant {
	max-height: 90vh;
	overflow: auto;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	font-size: 24rpx;
	text-align: center;
	justify-items: center;
}

.contant_list {
	width: 100%;
}

.contant .img {
	margin: 48rpx;
}

.contant .img image {
	width: 100%;
}

.list_acive {
	font-weight: bold;
}
```

`plate.js`

å°è£…æ•°æ®è¯·æ±‚æ–¹æ³•ï¼Œé¡µé¢æ˜¾ç¤ºè°ƒç”¨æ–¹æ³•æºå¸¦å‚æ•° URL è¿›è¡Œæ•°æ®è¯·æ±‚ï¼Œç‚¹å‡»åˆ‡æ¢é€‰é¡¹æºå¸¦å¯¹åº” URL è¿›è¡Œæ•°æ®è¯·æ±‚

```javascript
Page({
	data: {
		programmingList: [],
		acive: 0,
	},
	aciveFunc(e) {
		this.setData({
			acive: e.currentTarget.dataset.type,
		})
		if (e.currentTarget.dataset.type == 0) {
			this.myAjax(
				"https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/programmingStar"
			)
		} else if (e.currentTarget.dataset.type == 1) {
			this.myAjax(
				"https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/moneyStar"
			)
		} else if (e.currentTarget.dataset.type == 2) {
			this.myAjax(
				"https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/otherStar"
			)
		}
	},
	// å°è£…è¯·æ±‚
	myAjax(url) {
		wx.showLoading({
			title: "æ­£åœ¨åŠ è½½...",
		})
		wx.request({
			url: url,
			success: (res) => {
				this.setData({
					programmingList: res.data.list,
				})
				wx.hideLoading({})
			},
		})
	},
	onLoad(options) {
		this.myAjax(
			"https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/programmingStar"
		)
	},
	onReady() {},
	onShow() {
		if (typeof this.getTabBar == "function" && this.getTabBar()) {
			this.getTabBar().setData({
				selected: 1,
			})
		}
	},
	onHide() {
		if (typeof this.getTabBar == "function" && this.getTabBar()) {
			this.getTabBar().setData({
				btn_show: false,
			})
		}
	},
})
```

---

# æ˜ŸçƒèƒŒåŒ…é¡µé¢å¼€å‘

<img src="./images/shop.png" style="width:200px"></img>

### å•å…ƒæè¿°

- ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºæ»šåŠ¨è§†å›¾å®¹å™¨è¿›è¡Œé¡µé¢å¸ƒå±€
- è¯·æ±‚æ•°æ®è¿›è¡Œåˆ†é¡µå¤„ç†
- ä¸Šæ‹‰åŠ è½½å†æ¬¡è¿›è¡Œæ•°æ®è¯·æ±‚å®ç°æ·»åŠ æ•°ç»„å…ƒç´ é‡æ–°æ¸²æŸ“è§†å›¾è¿›è¡Œåˆ†é¡µ

### å•å…ƒå®æ–½

`shop.json` ç¼–å†™

ä¾æ—§æ˜¯å¼•å…¥ navBar ç»„ä»¶

```json
{
	"usingComponents": {
		"navigation-bar": "/components/navbar/navbar"
	}
}
```

`shop.wxml` ç¼–å†™

åˆ©ç”¨å¾®ä¿¡å°ç¨‹åºæä¾›çš„æ»šåŠ¨è§†å›¾ç»„ä»¶ è¿›è¡Œå¸ƒå±€ï¼Œä½¿ç”¨ `scroll-view` è‡ªå¸¦çš„ `bindscrolltolower` å±æ€§è§¦å‘ä¸Šæ‹‰åŠ è½½äº‹ä»¶

```html
<navigation-bar></navigation-bar>

<scroll-view
	class="lists"
	scroll-y
	lower-threshold="10"
	bindscrolltolower="getOnBottom"
>
	<view class="image_box">
		<view class="list" wx:for="{{ imgList }}" wx:key="item.id">
			<image src="{{ item.img }}" mode="widthFix"></image>
		</view>
	</view>
</scroll-view>
```

`shop.wxss` ç¼–å†™

```css
.lists {
	height: 100vh;
	overflow: auto;
}

.image_box {
	column-count: 2;
	column-gap: 0;
	padding-bottom: 300rpx;
}

.lists .list {
	margin: 24rpx 32rpx;
}

image {
	width: 100%;
	border-radius: 24rpx;
}
```

`shop.js` ç¼–å†™

å®šä¹‰åˆ‡ç‰‡é»˜è®¤èµ·å§‹ä½ç½®ã€å®šä¹‰é»˜è®¤æ•°ç»„ï¼Œæˆ‘ä»¬è¯·æ±‚å›æ¥çš„æ•°æ®å°†è¿›è¡Œåˆ‡ç‰‡åˆ†é¡µ `push` åˆ°é»˜è®¤æ•°ç»„ï¼Œå†æ¬¡æ›´æ”¹ `setdata` çŠ¶æ€ï¼Œå®ç°è§†å›¾å±‚çš„æ¸²æŸ“

```javascript
// å®šä¹‰åˆ‡ç‰‡èµ·å§‹ä½ç½®
let slice_num = 0
// å®šä¹‰é»˜è®¤æ•°ç»„
let arrList = []

Page({
	data: {
		imgList: [],
	},
	requestAjax() {
		wx.showLoading({
			title: "åŠ è½½ä¸­...",
		})
		wx.request({
			url: "https://mock.mengxuegu.com/mock/6362115cffa946598c7427b3/example/images?",
			success: (res) => {
				if (slice_num > res.data.list.length) return
				arrList.push(...res.data.list.slice(slice_num, 10 + slice_num))
				this.setData({
					imgList: arrList,
				})
				slice_num = slice_num + 10
			},
			complete() {
				wx.hideLoading({})
			},
		})
	},
	// ä¸Šæ‹‰åŠ è½½
	getOnBottom() {
		this.requestAjax()
	},
	onLoad(options) {
		this.requestAjax()
	},
	onReady() {},
	onShow() {
		if (typeof this.getTabBar == "function" && this.getTabBar()) {
			this.getTabBar().setData({
				selected: 2,
			})
		}
	},
	onHide() {
		if (typeof this.getTabBar == "function" && this.getTabBar()) {
			this.getTabBar().setData({
				btn_show: false,
			})
		}
	},
})
```

---

# æœç´¢é¡µé¢å¼€å‘

<img src="./images/search.png" style="width:200px"></img>

### å•å…ƒæè¿°

- Weui ç»„ä»¶åº“çš„ç»„ä»¶ä½¿ç”¨
- å®ç°æ¨¡æ‹Ÿæœç´¢åŠŸèƒ½

ï¼ˆåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦è·å–ç”¨æˆ·è¾“å…¥å€¼å³å¯ï¼Œä½œä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²ç»™åˆ°æœåŠ¡å™¨ï¼Œåç«¯è¿›è¡Œå¯¹æ•°æ®åº“è¡¨çš„æ¨¡ç³ŠæŸ¥è¯¢æ“ä½œï¼‰

### å•å…ƒå®æ–½

åœ¨ `pages` æ–‡ä»¶å¤¹ä¸‹æ–°å»º `search` æ–‡ä»¶å¤¹å¹¶åˆ›å»ºæ–°é¡µé¢,è¿›è¡Œç®€å•é¡µé¢å¯¼èˆªæ é…ç½®,å¼•å…¥ Weui ç»„ä»¶åº“çš„ search ç»„ä»¶

```json
{
	"usingComponents": {
		"mp-searchbar": "weui-miniprogram/searchbar/searchbar"
	},
	"navigationStyle": "default",
	"navigationBarTitleText": ""
}
```

åœ¨æœç´¢å¯¼èˆªç»„ä»¶ä¸­è¿›è¡Œè·¯ç”±è·³è½¬ç¼–å†™

`navbar.wxml` å¢åŠ ç‚¹å‡»äº‹ä»¶ `navTo`

```html
<!-- è‡ªå®šä¹‰é¡¶éƒ¨æ  -->
<view class="nav-bar" style="height:{{ navBarHeight }}px;">
    <input class="navColor search" bindtap="navTo" placeholder="æ¢ç´¢æ˜Ÿçƒ" style="height:{{ menuHeight }}px; min-height:{{ menuHeight }}px;line-height:{{ menuHeight }}px; left:{{ menuRight }}px; top:{{ menuTop }}px;"></input>
</view>

<!-- å ä½ï¼Œé«˜åº¦ä¸é¡¶éƒ¨æ ä¸€æ · -->
<view style="height:{{ navBarHeight }}px;"></view>

```

`navbar.js` å¢åŠ è·¯ç”±è·³è½¬åŠŸèƒ½

```javascript
const app = getApp()
Component({
	data: {
		navBarHeight: app.globalData.navBarHeight,
		menuRight: app.globalData.menuRight,
		menuTop: app.globalData.menuTop,
		menuHeight: app.globalData.menuHeight,
	},
	methods: {
		navTo() {
			wx.navigateTo({
				url: "/pages/search/search",
			})
		},
	},
})
```

`search.wxml` ç¼–å†™

```html
<view>
	<mp-searchbar
		placeholder="æœç´¢æ˜Ÿçƒç›¸å…³"
		bindclear="ddd"
		bindblur="blur"
	></mp-searchbar>
	<view class="tips" wx:if="{{ value }}"
		>æ²¡æœ‰æœç´¢åˆ° â€˜ {{ value }} â€™ å…³é”®å­—</view
	>
</view>
```

`search.css` ç¼–å†™

```css
@import "../../miniprogram_npm/weui-miniprogram/weui-wxss/dist/style/weui.wxss";

.tips {
	text-align: center;
	color: #666;
	margin: 48rpx;
}
```

`search.js` ç¼–å†™

å¤±å» input ç„¦ç‚¹æ—¶è·å–åˆ°ç”¨æˆ·è¾“å…¥çš„å€¼äº¤ç»™ value çŠ¶æ€ï¼Œå®æ—¶æ¸²æŸ“åˆ°è§†å›¾ï¼Œç‚¹å‡»æ¸…é™¤æŒ‰é’®ï¼Œå°† value çŠ¶æ€æ¢å¤ä¸ºç©ºå­—ç¬¦ä¸²

```javascript
Page({
	data: {
		value: "",
	},
	// input å¤±å»ç„¦ç‚¹
	blur(e) {
		this.setData({
			value: e.detail.value,
		})
	},
	// ç‚¹å‡» clear æŒ‰é’®
	ddd() {
		this.setData({
			value: "",
		})
	},
})
```
